<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>VideoMimic</title>
  <link rel="icon" href="./figs/logo.png" type="image/png">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Roboto+Mono:wght@300;700&display=swap');

    body {
      background-color: #fdfaf4;
      font-family: 'Playfair Display', serif;
      color: #1b1b1b;
      padding: 60px 30px;
    }

    .toc {
      width: 180px;
      font-family: 'Roboto Mono', monospace;
      position: fixed;
      top: 250px;
      /* Hide TOC by default */
      display: none; 
      /* left: max(30px, calc(25vw - 330px)); */ /* Move left positioning into media query */
    }

    /* Media Query: Apply styles only when viewport width is 1300px or wider */
    @media (min-width: 1400px) {
      .toc {
        /* Show the TOC */
        display: block; 
        /* Apply the calculated left position */
        left: max(30px, calc(25vw - 330px)); 
      }
    }

    .toc h3 {
      font-family: 'Playfair Display', serif;
      font-size: 24px;
      margin-top: 0;
      margin-bottom: 10px;
    }

    .toc hr {
      border: 0;
      height: 1px;
      background-color: #ccc;
      margin-bottom: 15px;
    }

    .toc ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .toc li {
      margin-bottom: 10px;
    }

    .toc a {
      text-decoration: none;
      color: #333;
      font-size: 16px;
    }

    .toc a:hover {
      color: #000;
      text-decoration: underline;
    }

    .main-content {
      max-width: 960px;
      margin: 0 auto;
    }

    .hero-text {
      font-size: 60px;
      font-weight: 700;
      letter-spacing: -1px;
      line-height: 1.1;
      margin-bottom: 10px;
    }

    .sub-hero-text {
      font-size: 40px;
      font-weight: 400;
      margin-bottom: 50px;
      line-height: 1.2;
    }

    /* New style for authors */
    .authors {
      font-family: 'Roboto Mono', monospace; /* Use a monospace font like taglines */
      font-size: 16px; /* Slightly smaller font size */
      color: #333; /* Dark grey color */
      line-height: 1.6; /* Adjust line spacing */
      margin-top: -32.5px; /* Reduce space below subtitle */
      margin-bottom: 17.5px; /* Add space below authors */
      text-align: left; /* Ensure left alignment */
    }
    .authors span { /* Style for affiliation/notes */
        display: block; /* Put affiliation/note on new line */
        font-size: 14px;
        color: #555;
        margin-top: 0px;
    }
    /* Style for the affiliation specifically */
    .authors .affiliation {
        /* Change from bold to a higher numeric weight */
        /* font-weight: bold; */ 
        /* Set font-weight to 700 (standard bold) */
        font-weight: 600;  
        font-size: 16px;   
        color: #111;      
    }
    /* Style for links within the authors block */
    .authors a {
        color: inherit; /* Inherit the color from the .authors class */
        text-decoration: none; /* Remove default underline */
    }
    .authors a:hover {
        text-decoration: underline; /* Add underline on hover */
    }
    /* End new style */

    .tagline {
      font-family: 'Roboto Mono', monospace;
      font-size: 24px;
      background: #000;
      color: #fff;
      display: inline-block;
      padding: 8px 16px;
      margin: 40px 0;
    }

    img {
      width: 100%;
      /* Update border: set width (e.g., 4px), style (solid), color (#000) */
      /* border: 0cm solid #000; */
      border: 1.5px solid #000; 
      /* Add border-radius for rounded corners */
      border-radius: 15px; 
      margin: 0px 20px;
      /* Ensure images behave correctly with border-box sizing */
      box-sizing: border-box; 
    }

    /* Style to remove border and radius from Figure 2 (figs/4.png) */
    #figure-2-img {
      /* border: none; */ /* Remove border */
      border: none;
      /* border-radius: 0; */ /* Remove border radius */
      border-radius: 0;
    }

    /* Style to add left padding to Figure 3 (figs/3.png) */
    #figure-3-img {
      /* padding-left: 15px; */ /* Add 15px padding on the left */
      padding-left: 15px;
      /* background-color: #fff; */ /* Set background color to white */
      background-color: #fff;
    }

    /* --- Updated Styles for Video Gallery --- */

    /* New outer wrapper for the whole section */
    .video-gallery-section {
        margin-bottom: 40px; /* Space below the gallery section */
        width: 100%; /* Allow it to span full width */
    }

    /* Container for the scrollable videos - now wider */
    .video-gallery-container {
      /* Remove position: relative */
      /* Remove padding: 0 45px */
      box-sizing: border-box;
      width: 100%; /* Take full width */
      overflow-x: auto; /* Enable horizontal scrolling */
      scroll-behavior: smooth; /* Smooth scrolling effect */
       /* Hide scrollbar */
      scrollbar-width: none; /* Firefox */
      -ms-overflow-style: none;  /* IE and Edge */
    }
    .video-gallery-container::-webkit-scrollbar {
      display: none; /* Chrome, Safari, Opera */
    }


    /* The actual scrolling div holding the videos */
    .video-gallery {
      display: flex;
      gap: 15px; /* Space between videos */
      padding: 0 5vw; /* Add padding L/R to make content wider than main column (adjust 5vw as needed) */
      padding-bottom: 10px; /* Add some space at the bottom */
      box-sizing: border-box;
      width: max-content; /* Ensure it fits all videos horizontally */
      margin: 0 auto; /* Center the flex container if it's narrower than the container (unlikely with max-content) */
    }


    .gallery-video {
      flex: 0 0 auto; /* Prevent videos from shrinking/growing in the flex context */
      /* width: 30vw; */ /* Remove fixed/relative width */
      /* max-width: 450px; */ /* Remove max-width as width will be auto */
      height: 220px;  /* Set a fixed height for all videos. Adjust this value as desired. */
      width: auto;    /* Allow width to adjust to maintain original aspect ratio */
      /* max-height: 253.125px; */ /* No longer needed if height is fixed */
      /* object-fit: cover; */ /* Remove object-fit: cover to avoid cropping */
      border-radius: 15px; /* Keep the rounded corners */
      box-sizing: border-box;
      background-color: #000; /* Optional: background for the video element itself, useful if videos are transparent or fail to load */
      /* Add a box-shadow for the glow/shadow effect */
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }

    /* Styles for the navigation buttons */
    .gallery-nav {
      /* ... existing button styles (background, color, border, radius, size, etc.) ... */
      background-color: rgba(40, 40, 40, 0.8);
      color: white;
      border: none;
      border-radius: 50%;
      width: 35px;  /* Slightly smaller buttons */
      height: 35px; /* Slightly smaller buttons */
      font-size: 20px; /* Slightly smaller font */
      font-weight: bold;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background-color 0.2s ease;
      margin: 0 5px; /* Adjust margin between buttons */
      flex-shrink: 0; /* Prevent buttons from shrinking */
    }
    .gallery-nav:hover {
        background-color: rgba(0, 0, 0, 1);
    }

    /* Container for the navigation buttons - remove centering margin */
    .gallery-nav-controls {
        /* max-width: 960px; */ /* No longer needed */
        /* margin: 15px auto 0 auto; */ /* Remove auto margin */
        display: flex; /* Keep as flex to layout buttons */
        /* justify-content: center; */ /* No longer needed */
        align-items: center;
        margin-right: 15px; /* Add space between buttons and caption text */
    }


    /* Container to center the gallery caption and buttons */
    .gallery-caption-container {
        max-width: 960px; /* Align container with main content */
        margin: 15px auto 0 auto; /* Top margin, centered horizontally */
        padding: 0 20px; /* Match original caption padding */
        box-sizing: border-box;
        display: flex; /* Make it a flex container */
        align-items: center; /* Vertically center items (buttons and text) */
        justify-content: center; /* Center content horizontally */
    }

    /* Specific style adjustments for the gallery caption text */
    .figure-caption.gallery-caption {
        margin-bottom: 0;
        margin-top: 0; /* Remove top margin, alignment handled by flex */
        text-align: left; /* Align text to the left within its space */
        flex-grow: 1; /* Allow text to take available space if needed */
        /* Optional: Add a small left margin if needed */
        /* margin-left: 10px; */
    }
    /* --- End Video Gallery Styles --- */

    .section {
      font-size: 20px;
      line-height: 1.7;
      margin-bottom: 40px;
    }

    .pull-quote {
      font-size: 32px;
      font-style: italic;
      font-weight: 400;
      margin: 60px 0 20px 0;
      color: #333;
    }

    .footer {
      font-size: 14px;
      font-family: 'Roboto Mono', monospace;
      color: #666;
      margin-top: 80px;
      border-top: 1px solid #ccc;
      padding-top: 30px;
      text-align: center;
    }

    /* New style for figure captions */
    .figure-caption {
      font-family: 'Roboto Mono', monospace;
      font-size: 14px;
      color: #555;
      text-align: center;
      margin-top: 10px; /* Space above caption */
      margin-bottom: 40px; /* Space below caption, before next element */
      padding: 0 20px; /* Add some horizontal padding */
    }

    /* New styles for quick links */
    .quick-links {
      text-align: center;
      margin-top: -10px; /* Adjust to bring closer to caption if needed, or use a positive value for more space */
      margin-bottom: 0px; /* Space before the next section (Abstract tagline) */
    }
    .quick-links a {
      font-family: 'Roboto Mono', monospace;
      font-size: 18px; /* Slightly larger than caption */
      font-weight: bold;
      /* color: #337ab7; */ /* Standard link blue, or choose your own */
      color: #333; /* Change to dark grey */
      text-decoration: none;
      margin: 0 36px; /* Spacing between links */
      padding: 5px 8px; /* Add some padding for a button-like feel if desired */
      /* border: 1px solid transparent; */ /* Optional: for button look */
      /* border-radius: 4px; */ /* Optional: for button look */
    }
    .quick-links a:hover,
    .quick-links a:focus {
      text-decoration: underline;
      /* color: #23527c; */ /* Darker blue on hover */
      color: #000; /* Optional: Change to black or slightly darker grey on hover */
      /* background-color: #f0f0f0; */ /* Optional: background for button look on hover */
      /* border-color: #ccc; */ /* Optional: for button look on hover */
    }
    /* End new styles for quick links */
  </style>
</head>
<body>
  <div class="toc">
    <h3>Content</h3>
    <hr>
    <ul>
      <li><a href="#abstract">Abstract</a></li>
      <li><a href="#real-to-sim">Real to Sim</a></li>
      <li><a href="#training-in-sim">Training in Sim</a></li>
      <li><a href="#deploy-in-real">Deploy in Real</a></li>
    </ul>
  </div>

  <div class="main-content">
    <div class="hero-text">VideoMimic</div>
    <div class="sub-hero-text">Visual imitation enables contextual humanoid control</div>

    <!-- Add Authors -->
    <div class="authors">
      <a href="https://allshire.org/" target="_blank">Arthur Allshire*</a>, <a href="https://hongsukchoi.github.io/" target="_blank">Hongsuk Choi*</a>, <a href="https://www.junyi42.com/" target="_blank">Junyi Zhang*</a>, <a href="https://mcallisterdavid.com/" target="_blank">David McAllister*</a>, <a href="https://antoniomacaronio.github.io/personal-website/#/home/" target="_blank">Anthony Zhang</a>, <a href="https://chungmin99.github.io/" target="_blank">Chung Min Kim</a>,<br>
      <a href="https://people.eecs.berkeley.edu/~trevor/" target="_blank">Trevor Darrell</a>, <a href="https://people.eecs.berkeley.edu/~pabbeel/" target="_blank">Pieter Abbeel</a>, <a href="https://people.eecs.berkeley.edu/~malik/" target="_blank">Jitendra Malik</a>, <a href="https://people.eecs.berkeley.edu/~kanazawa/" target="_blank">Angjoo Kanazawa.</a> (*:equal contribution)
      <span class="affiliation">University of California, Berkeley</span>
    </div>
    <!-- End Authors -->

    <!-- use the video ./figs/videomimic_teaser.mp4 -->
    <video id="teaser-video" src="./figs/videomimic_teaser.mp4" width="100%" height="100%" controls muted playsinline>
    </video>
    <!-- Caption for Figure 1 (Teaser Video) -->
    <p class="figure-caption">
        <span style="font-variant: small-caps;">VideoMimic</span> is a real-to-sim-to-real pipeline that converts monocular videos into transferable humanoid skills, letting robots learn context-aware behaviors (terrain-traversing, climbing, sitting) in a single policy.
    </p>

    <!-- Add Quick Links Here -->
    <div class="quick-links">
      <a href="./VideoMimic.pdf" target="_blank">[pdf]</a>
      <a href="#" target="_blank">[arxiv]</a>
      <a href="#">[code(soon)]</a> 
      <a href="#">[gallery]</a>
    </div>
    
    <div class="tagline" id="abstract">Abstract.</div>


    <div class="section">

        How can we teach humanoids to climb staircases and sit on chairs using the surrounding environment context? Arguably, the simplest way is to <em>just show them</em>&mdash;casually capture a human motion video and feed it to humanoids.
        We introduce <span style="font-variant: small-caps;">VideoMimic</span>, a real-to-sim-to-real pipeline that mines everyday videos, jointly reconstructs the humans and the environment, and produces whole-body control policies for humanoid robots that perform the corresponding skills.
       We demonstrate the results of our pipeline on real humanoid robots, showing robust, repeatable contextual control such as staircase ascents and descents, sitting and standing from chairs and benches, as well as other dynamic whole-body skills&mdash;all from a single policy, conditioned on the environment and global root commands. 
       We hope our data and approach help enable a scalable path towards teaching humanoids to operate in diverse real-world environments.
    
    </div> 

    <div class="tagline" id="real-to-sim">Real to Sim.</div>

    <img src="figs/2.png" alt="real-to-sim pipeline">
    <!-- Caption for Figure 2 -->
    <p class="figure-caption">
      <b>Figure 1:</b> The Real-to-Sim pipeline reconstructs human motion and scene geometry from video, outputting simulator-ready data.
    </p>

    <img id="figure-2-img" src="figs/4.png" alt="real-to-sim pipeline">
    <!-- Caption for Figure 4 -->
    <p class="figure-caption">
      <b>Figure 2:</b> Versatile capabilities include handling internet videos, multi-human reconstruction, and ego-view rendering.
    </p>

    <div class="tagline" id="training-in-sim">Training in Sim.</div>
    <img id="figure-3-img" src="figs/3.png" alt="real-to-sim pipeline">
    <!-- Caption for Figure 3 -->
    <p class="figure-caption">
      <b>Figure 3:</b> Policy training pipeline in simulation, progressing from MoCap pre-training to geometry-aware tracking and distillation.
    </p>

    <div class="tagline" id="deploy-in-real">Deploy in Real.</div>

    <!-- NOTE: The entire video gallery block below is MOVED outside main-content -->

    <!-- <img src="figs/5.png" alt="real-to-sim pipeline">
    <p class="figure-caption">
      <b>Figure 4:</b> Real-world deployment showing various skills (terrain traversal, standing, sitting) executed by a single context-aware policy.
    </p> -->

  </div> <!-- End of main-content div -->

  <!-- Video Gallery Section (Now outside main-content) -->
  <div class="video-gallery-section" id="gallery-section-anchor">
    <div class="video-gallery-container">
      <div class="video-gallery" id="videoGallery">
        <!-- Videos remain here - ADD autoplay -->
        <video class="gallery-video" src="./sitting/1.mp4" autoplay muted playsinline loop></video>
        <video class="gallery-video" src="./sitting/2.mp4" autoplay muted playsinline loop></video>
        <video class="gallery-video" src="./sitting/3.mp4" autoplay muted playsinline loop></video>
        <video class="gallery-video" src="./sitting/4.mp4" autoplay muted playsinline loop></video>
        <!-- Add more videos as needed, ensuring they have autoplay muted loop -->
      </div>
    </div>
    <!-- Container for the caption AND buttons -->
    <div class="gallery-caption-container">
        <!-- Move button controls INSIDE caption container -->
        <div class="gallery-nav-controls">
            <button class="gallery-nav left" id="scrollLeftBtn">&lt;</button>
            <button class="gallery-nav right" id="scrollRightBtn">&gt;</button>
        </div>
        <!-- Caption text -->
        <p class="figure-caption gallery-caption"> <!-- Added gallery-caption class -->
            Examples of the tasks that our model can perform, following instructions of varying granularity. All experiments were done in homes that were not in the training data.
        </p>
    </div>
  </div>
  <!-- End Video Gallery Section -->

  <div class="footer">
    <!-- © UC Berkeley | Powered by vision, motion, and a little ambition. -->
     © UC Berkeley | Webpage designed by the <span style="font-variant: small-caps;">VideoMimic</span> team.
  </div>

  <!-- Add JavaScript for delayed video playback and looping -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const video = document.getElementById('teaser-video'); // Get the video element by its ID
      const initialDelay = 2000; // 2 seconds
      const loopDelay = 2000;    // 2 seconds

      if (video) {
        let initialPlayTimeout;
        let loopTimeout;

        // --- Initial Play Delay ---
        initialPlayTimeout = setTimeout(function() {
          video.play().catch(function(error) {
            console.log('Delayed auto-play prevented:', error);
            // Autoplay was prevented, user might need to click play
          });
        }, initialDelay);

        // --- Delayed Looping ---
        video.addEventListener('ended', function() {
          clearTimeout(loopTimeout); // Clear previous loop timeout if any
          loopTimeout = setTimeout(function() {
            video.currentTime = 0; // Reset video to the beginning
            video.play().catch(function(error) {
              console.log('Delayed loop play prevented:', error);
            });
          }, loopDelay);
        });

        // --- Clear Timeouts on Manual Pause ---
        video.addEventListener('pause', function() {
          // Only clear timeouts if the video isn't at the very end
          // (since 'ended' can sometimes trigger 'pause')
          // and wasn't paused right at the beginning before initial play
          if (!video.ended && video.currentTime > 0) {
             clearTimeout(initialPlayTimeout); // Clear initial delay if paused before it starts
             clearTimeout(loopTimeout);       // Clear loop delay
             console.log('Manual pause detected, clearing timeouts.');
          }
        });

        // --- Clear Timeouts on Manual Play (if paused before initial delay finishes) ---
         video.addEventListener('play', function() {
             // If the video starts playing before the initial timeout finishes (e.g., user clicks play)
             // clear the initial timeout to prevent it from trying to play again.
             if (initialPlayTimeout) {
                 clearTimeout(initialPlayTimeout);
             }
         });

      } else {
        console.error('Video element with ID "teaser-video" not found.');
      }
    });
  </script>

  <!-- JavaScript for Video Gallery Navigation -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Select the scrollable container element
      const galleryContainer = document.querySelector('.video-gallery-container');
      // Select the inner div holding the videos (still needed for calculations)
      const galleryInner = document.getElementById('videoGallery');
      const scrollLeftBtn = document.getElementById('scrollLeftBtn');
      const scrollRightBtn = document.getElementById('scrollRightBtn');

      // Check if all necessary elements exist
      if (galleryContainer && galleryInner && scrollLeftBtn && scrollRightBtn) {
        // Calculate the scroll amount based on the width of the first video + gap
        // Use galleryInner to find the first video element
        const scrollAmount = (galleryInner.firstElementChild?.offsetWidth || 300) + 15; // 15 is the gap

        scrollLeftBtn.addEventListener('click', () => {
          // Scroll the CONTAINER element
          galleryContainer.scrollBy({ left: -scrollAmount, behavior: 'smooth' });
        });

        scrollRightBtn.addEventListener('click', () => {
          // Scroll the CONTAINER element
          galleryContainer.scrollBy({ left: scrollAmount, behavior: 'smooth' });
        });

        /* --- REMOVE OR COMMENT OUT HOVER LOGIC ---
        // Optional: Add hover-to-play functionality for gallery videos
        // Target videos within galleryInner
        const galleryVideos = galleryInner.querySelectorAll('.gallery-video');
        galleryVideos.forEach(video => {
            video.addEventListener('mouseenter', () => {
                video.play().catch(e => console.log("Autoplay prevented:", e));
            });
            video.addEventListener('mouseleave', () => {
                video.pause();
                // video.currentTime = 0; // Optional: reset video on mouse leave
            });
        });
        */ // --- END OF REMOVED HOVER LOGIC ---

      } else {
        console.error('Gallery elements not found for navigation setup.');
        // Log which elements might be missing
        if (!galleryContainer) console.error('Missing element: .video-gallery-container');
        if (!galleryInner) console.error('Missing element: #videoGallery');
        if (!scrollLeftBtn) console.error('Missing element: #scrollLeftBtn');
        if (!scrollRightBtn) console.error('Missing element: #scrollRightBtn');
      }
    });
  </script>

</body>
</html>