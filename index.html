<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>VideoMimic</title>
  <link rel="icon" href="./figs/logo.png" type="image/png">
  <!-- <meta name="viewport" content="width=device-width, initial-scale=1.0"> -->
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="toc">
    <h3>Content</h3>
    <hr>
    <ul>
      <li><a href="#abstract">Abstract</a></li>
      <li><a href="#deploy-in-real">Real-world Demo</a></li>
      <li><a href="#real-to-sim">Real to Sim</a></li>
      <li><a href="#training-in-sim">Training in Sim</a></li>
    </ul>
  </div>

  <div class="main-content">
    <div class="hero-text">VideoMimic</div>
    <div class="sub-hero-text">Visual imitation enables contextual humanoid control</div>

    <!-- Add Authors -->
    <div class="authors">
      <a href="https://allshire.org/" target="_blank">Arthur Allshire*</a>, <a href="https://hongsukchoi.github.io/" target="_blank">Hongsuk Choi*</a>, <a href="https://www.junyi42.com/" target="_blank">Junyi Zhang*</a>, <a href="https://mcallisterdavid.com/" target="_blank">David McAllister*</a>, <a href="https://antoniomacaronio.github.io/personal-website/#/home/" target="_blank">Anthony Zhang</a>, <a href="https://chungmin99.github.io/" target="_blank">Chung Min Kim</a>,<br>
      <a href="https://people.eecs.berkeley.edu/~trevor/" target="_blank">Trevor Darrell</a>, <a href="https://people.eecs.berkeley.edu/~pabbeel/" target="_blank">Pieter Abbeel</a>, <a href="https://people.eecs.berkeley.edu/~malik/" target="_blank">Jitendra Malik</a>, <a href="https://people.eecs.berkeley.edu/~kanazawa/" target="_blank">Angjoo Kanazawa.</a>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(*:equal contribution)
      <span class="affiliation">University of California, Berkeley</span>
    </div>
    <!-- End Authors -->

    <!-- use the video ./figs/videomimic_teaser.mp4 -->
    <video id="teaser-video" src="./figs/videomimic_teaser.mp4" width="100%" height="100%" controls muted playsinline>
    </video>
    <!-- Caption for Figure 1 (Teaser Video) -->
    <p class="figure-caption">
        <span style="font-variant: small-caps;">VideoMimic</span> is a real-to-sim-to-real pipeline that converts monocular videos into transferable humanoid skills, letting robots learn context-aware behaviors (terrain-traversing, climbing, sitting) in a single policy.
    </p>

    <!-- Add Quick Links Here -->
    <div class="quick-links">
      <a href="./VideoMimic.pdf" target="_blank">[pdf]</a>
      <a href="https://arxiv.org/abs/2505.03729" target="_blank">[arxiv]</a>
      <a href="https://github.com/hongsukchoi/VideoMimic">[code(soon)]</a> 
      <!-- <a href="#gallery-section-anchor">[gallery]</a> -->
    </div>
    
    <div class="tagline" id="abstract">Abstract.</div>


    <div class="section">

        How can we teach humanoids to climb staircases and sit on chairs using the surrounding environment context? Arguably, the simplest way is to <em>just show them</em>&mdash;casually capture a human motion video and feed it to humanoids.
        We introduce <span style="font-variant: small-caps;">VideoMimic</span>, a real-to-sim-to-real pipeline that mines everyday videos, jointly reconstructs the humans and the environment, and produces whole-body control policies for humanoid robots that perform the corresponding skills.
       We demonstrate the results of our pipeline on real humanoid robots, showing robust, repeatable contextual control such as staircase ascents and descents, sitting and standing from chairs and benches, as well as other dynamic whole-body skills&mdash;all from a single policy, conditioned on the environment and global root commands. 
       We hope our data and approach help enable a scalable path towards teaching humanoids to operate in diverse real-world environments.
    
    </div> 

    <div class="tagline" id="deploy-in-real">Real-world Demo.</div>

    <!-- Video Gallery Section - STAIRS VIDEOS -->
    <div class="video-gallery-section" id="stairsGallerySection">
      <div class="video-gallery-container">
        <div class="video-gallery" id="videoGalleryStairs">
          <!-- Videos remain here - ADD autoplay -->
          <video class="gallery-video" src="./stairs/1.mp4" autoplay muted playsinline loop></video>
          <video class="gallery-video" src="./stairs/2.mp4" autoplay muted playsinline loop></video>
          <video class="gallery-video" src="./stairs/7.mp4" autoplay muted playsinline loop></video>
          <video class="gallery-video" src="./stairs/4.mp4" autoplay muted playsinline loop></video>
          <video class="gallery-video" src="./stairs/5.mp4" autoplay muted playsinline loop></video>
          <video class="gallery-video" src="./stairs/6.mp4" autoplay muted playsinline loop></video>
          <video class="gallery-video" src="./stairs/3.mp4" autoplay muted playsinline loop></video>
          <video class="gallery-video" src="./stairs/8.mp4" autoplay muted playsinline loop></video>
          <!-- Add more videos as needed, ensuring they have autoplay muted loop -->
        </div>
      </div>
      <!-- Container for the caption AND buttons -->
      <div class="gallery-caption-container">
          <!-- Move button controls INSIDE caption container -->
          <div class="gallery-nav-controls">
              <button class="gallery-nav left" id="scrollLeftBtnStairs">&lt;</button>
              <button class="gallery-nav right" id="scrollRightBtnStairs">&gt;</button>
          </div>
          <!-- Caption text -->
          <p class="figure-caption gallery-caption">
              <b>Stairs climbing up/down:</b> The robot confidently ascends and descends various staircases, showcasing stable and adaptive locomotion.
          </p>
      </div>
    </div>
  <!-- End Video Gallery Section -->

  <!-- Video Gallery Section - SITTING VIDEOS -->
  <div class="video-gallery-section" id="gallery-section-anchor">
    <div class="video-gallery-container">
      <div class="video-gallery" id="videoGallerySitting">
        <!-- Videos remain here - ADD autoplay -->
        <video class="gallery-video" src="./sitting/5.mp4" autoplay muted playsinline loop></video>
        <video class="gallery-video" src="./sitting/3.mp4" autoplay muted playsinline loop></video>
        <video class="gallery-video" src="./sitting/1.mp4" autoplay muted playsinline loop></video>
        <video class="gallery-video" src="./sitting/2.mp4" autoplay muted playsinline loop></video>
        <video class="gallery-video" src="./sitting/4.mp4" autoplay muted playsinline loop></video>
        <!-- Add more videos as needed, ensuring they have autoplay muted loop -->
      </div>
    </div>
    <!-- Container for the caption AND buttons -->
    <div class="gallery-caption-container">
        <!-- Move button controls INSIDE caption container -->
        <div class="gallery-nav-controls">
            <button class="gallery-nav left" id="scrollLeftBtnSitting">&lt;</button>
            <button class="gallery-nav right" id="scrollRightBtnSitting">&gt;</button>
        </div>
        <!-- Caption text -->
        <p class="figure-caption gallery-caption">
            <b>Sitting/Standing:</b> Our robot demonstrates smooth sitting and standing behaviors on different chairs and benches, adapting to object heights and shapes.
        </p>
    </div>
  </div>
  <!-- End Video Gallery Section -->

  <!-- Video Gallery Section - TRAVERSING VIDEOS -->
    <div class="video-gallery-section" id="traversingGallerySection">
      <div class="video-gallery-container">
        <div class="video-gallery" id="videoGalleryTraversing">
          <!-- Videos remain here - ADD autoplay -->
          <video class="gallery-video" src="./traversing/1.mp4" autoplay muted playsinline loop></video>
          <video class="gallery-video" src="./traversing/5.mp4" autoplay muted playsinline loop></video>
          <video class="gallery-video" src="./traversing/7.mp4" autoplay muted playsinline loop></video>
          <video class="gallery-video" src="./traversing/4.mp4" autoplay muted playsinline loop></video>
          <video class="gallery-video" src="./traversing/2.mp4" autoplay muted playsinline loop></video>
          <video class="gallery-video" src="./traversing/6.mp4" autoplay muted playsinline loop></video>
          <video class="gallery-video" src="./traversing/3.mp4" autoplay muted playsinline loop></video>
          <!-- Add more videos as needed, ensuring they have autoplay muted loop -->
        </div>
      </div>
      <!-- Container for the caption AND buttons -->
      <div class="gallery-caption-container">
          <!-- Move button controls INSIDE caption container -->
          <div class="gallery-nav-controls">
              <button class="gallery-nav left" id="scrollLeftBtnTraversing">&lt;</button>
              <button class="gallery-nav right" id="scrollRightBtnTraversing">&gt;</button>
          </div>
          <!-- Caption text -->
          <p class="figure-caption gallery-caption">
              <b>Terrain traversing:</b> Watch the humanoid navigate diverse terrains, including uneven ground, slopes, and stepping over small obstacles.
          </p>
      </div>
    </div>
  <!-- End Video Gallery Section -->
    <div class="tagline" id="real-to-sim">Real to Sim.</div>

    <div class="r2s-vertical-layout">
      <div class="r2s-video-row r2s-top-row">
        <video class="r2s-video-item r2s-video-input" src="./single/input.mp4" autoplay muted loop playsinline></video>
        <video class="r2s-video-item r2s-video-smpl" src="./single/smpl.mp4" autoplay muted loop playsinline></video>
      </div>
      <div class="r2s-caption-row">
        <p class="r2s-caption-item">Input Video</p>
        <p class="r2s-caption-item">Human + Scene Reconstruction</p>
      </div>
      <div class="r2s-video-row r2s-bottom-row">
        <video class="r2s-video-item r2s-video-g1" src="./single/g1.mp4" autoplay muted loop playsinline></video>
        <div class="stacked-ego-videos">
          <video class="r2s-video-item r2s-video-ego-rgb" src="./single/ego_rgb.mp4" autoplay muted loop playsinline></video>
          <video class="r2s-video-item r2s-video-ego-depth" src="./single/ego_depth.mp4" autoplay muted loop playsinline></video>
        </div>
        <video class="r2s-video-item r2s-video-sim" src="./single/sim.mp4" autoplay muted loop playsinline></video>
      </div>
      <div class="r2s-caption-row">
        <p class="r2s-caption-item">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;G1 Retargeted Results</p>
        <p class="r2s-caption-item">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Egoview (RGB/Depth)</p>
        <p class="r2s-caption-item">Training in Simulation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
      </div>
      <p class="figure-caption">
        <b>Our pipeline on a single video. Given the input video, we reconstruct the human and scene, retarget the human motion to Unitree G1, and train a policy in simulation that can mimic the kinematic motion.</b>
      </p>
    </div>


    <img src="figs/2.png" alt="real-to-sim pipeline" id="figure-2-img">
    <!-- Caption for Figure 2 -->
    <p class="figure-caption">
      <b>Figure 1:</b> The Real-to-Sim pipeline reconstructs human motion and scene geometry from video, outputting simulator-ready data.
    </p>

    <img id="figure-2-img" src="figs/4.png" alt="real-to-sim pipeline">
    <!-- Caption for Figure 4 -->
    <p class="figure-caption">
      <b>Figure 2:</b> Versatile capabilities include handling internet videos, multi-human reconstruction, and ego-view rendering.
    </p>

    <div class="tagline" id="training-in-sim">Training in Sim.</div>
    <img id="figure-3-img" src="figs/3.png" alt="real-to-sim pipeline">
    <!-- Caption for Figure 3 -->
    <p class="figure-caption">
      <b>Figure 3:</b> Policy training pipeline in simulation, progressing from MoCap pre-training to geometry-aware tracking and distillation.
    </p>

  </div> <!-- End of main-content div -->


  <div class="footer">
    <!-- © UC Berkeley | Powered by vision, motion, and a little ambition. -->
     © UC Berkeley | Webpage designed by the <span style="font-variant: small-caps;">VideoMimic</span> team.
  </div>

  <!-- Add JavaScript for delayed video playback and looping -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const video = document.getElementById('teaser-video'); // Get the video element by its ID
      const initialDelay = 2000; // 2 seconds
      const loopDelay = 2000;    // 2 seconds

      if (video) {
        let initialPlayTimeout;
        let loopTimeout;

        // --- Initial Play Delay ---
        initialPlayTimeout = setTimeout(function() {
          video.play().catch(function(error) {
            console.log('Delayed auto-play prevented:', error);
            // Autoplay was prevented, user might need to click play
          });
        }, initialDelay);

        // --- Delayed Looping ---
        video.addEventListener('ended', function() {
          clearTimeout(loopTimeout); // Clear previous loop timeout if any
          loopTimeout = setTimeout(function() {
            video.currentTime = 0; // Reset video to the beginning
            video.play().catch(function(error) {
              console.log('Delayed loop play prevented:', error);
            });
          }, loopDelay);
        });

        // --- Clear Timeouts on Manual Pause ---
        video.addEventListener('pause', function() {
          // Only clear timeouts if the video isn't at the very end
          // (since 'ended' can sometimes trigger 'pause')
          // and wasn't paused right at the beginning before initial play
          if (!video.ended && video.currentTime > 0) {
             clearTimeout(initialPlayTimeout); // Clear initial delay if paused before it starts
             clearTimeout(loopTimeout);       // Clear loop delay
             console.log('Manual pause detected, clearing timeouts.');
          }
        });

        // --- Clear Timeouts on Manual Play (if paused before initial delay finishes) ---
         video.addEventListener('play', function() {
             // If the video starts playing before the initial timeout finishes (e.g., user clicks play)
             // clear the initial timeout to prevent it from trying to play again.
             if (initialPlayTimeout) {
                 clearTimeout(initialPlayTimeout);
             }
         });

      } else {
        console.error('Video element with ID "teaser-video" not found.');
      }
    });
  </script>

  <!-- JavaScript for Video Gallery Navigation -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const galleries = [
        {
          sectionId: 'gallery-section-anchor', // ID of the .video-gallery-section for sitting
          galleryInnerId: 'videoGallerySitting',
          scrollLeftBtnId: 'scrollLeftBtnSitting',
          scrollRightBtnId: 'scrollRightBtnSitting'
        },
        {
          sectionId: 'traversingGallerySection', // ID of the .video-gallery-section for traversing
          galleryInnerId: 'videoGalleryTraversing',
          scrollLeftBtnId: 'scrollLeftBtnTraversing',
          scrollRightBtnId: 'scrollRightBtnTraversing'
        },
        {
          sectionId: 'stairsGallerySection', // ID of the .video-gallery-section for stairs
          galleryInnerId: 'videoGalleryStairs',
          scrollLeftBtnId: 'scrollLeftBtnStairs',
          scrollRightBtnId: 'scrollRightBtnStairs'
        }
      ];

      galleries.forEach(galleryConfig => {
        const gallerySection = document.getElementById(galleryConfig.sectionId);
        if (!gallerySection) {
          console.error(`Gallery section with ID ${galleryConfig.sectionId} not found.`);
          return;
        }

        const galleryContainer = gallerySection.querySelector('.video-gallery-container');
        const galleryInner = document.getElementById(galleryConfig.galleryInnerId);
        const scrollLeftBtn = document.getElementById(galleryConfig.scrollLeftBtnId);
        const scrollRightBtn = document.getElementById(galleryConfig.scrollRightBtnId);

        if (galleryContainer && galleryInner && scrollLeftBtn && scrollRightBtn) {
          // Calculate the scroll amount based on the width of the first video + gap
          const scrollAmount = (galleryInner.firstElementChild?.offsetWidth || 300) + 15; // 15 is the gap

          scrollLeftBtn.addEventListener('click', () => {
            // Scroll the CONTAINER element
            galleryContainer.scrollBy({ left: -scrollAmount, behavior: 'smooth' });
          });

          scrollRightBtn.addEventListener('click', () => {
            // Scroll the CONTAINER element
            galleryContainer.scrollBy({ left: scrollAmount, behavior: 'smooth' });
          });

          /* --- REMOVE OR COMMENT OUT HOVER LOGIC ---
          // Optional: Add hover-to-play functionality for gallery videos
          // Target videos within galleryInner
          const galleryVideos = galleryInner.querySelectorAll('.gallery-video');
          galleryVideos.forEach(video => {
              video.addEventListener('mouseenter', () => {
                  video.play().catch(e => console.log("Autoplay prevented:", e));
              });
              video.addEventListener('mouseleave', () => {
                  video.pause();
                  // video.currentTime = 0; // Optional: reset video on mouse leave
              });
          });
          */ // --- END OF REMOVED HOVER LOGIC ---

        } else {
          console.error(`Gallery elements not found for navigation setup in section ${galleryConfig.sectionId}.`);
          // Log which elements might be missing
          if (!galleryContainer) console.error('Missing element: .video-gallery-container in section ' + galleryConfig.sectionId);
          if (!galleryInner) console.error(`Missing element with ID ${galleryConfig.galleryInnerId}`);
          if (!scrollLeftBtn) console.error(`Missing element with ID ${galleryConfig.scrollLeftBtnId}`);
          if (!scrollRightBtn) console.error(`Missing element with ID ${galleryConfig.scrollRightBtnId}`);
        }
      });
    });
  </script>

  <!-- JavaScript for Real-to-Sim Video Synchronization -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const videosToSync = [
        document.querySelector('.r2s-video-input'),   // 10s
        document.querySelector('.r2s-video-smpl'),    // 30s
        document.querySelector('.r2s-video-g1'),      // 30s
        document.querySelector('.r2s-video-ego-rgb'), // 10s
        document.querySelector('.r2s-video-ego-depth'),// 10s
        document.querySelector('.r2s-video-sim')      // 10s
      ].filter(Boolean); // Filter out nulls if any class name is wrong or video missing

      function attemptToPlayAllR2SVideos() {
        if (videosToSync.length === 0) {
          console.warn('No videos found for Real-to-Sim synchronization.');
          return;
        }

        const playPromises = videosToSync.map(video => {
          video.currentTime = 0; // Ensure starting from the beginning
          return video.play()
            .catch(error => {
              console.warn(`Autoplay was prevented for video with source ${video.src}. User interaction might be needed.`, error);
              // You could add a visual indicator or a manual play button here if needed
            });
        });

        Promise.all(playPromises.map(p => p.catch(e => e))) // Wait for all play attempts (even if some fail)
          .then(() => {
            console.log('Attempted to start all Real-to-Sim videos for synchronization.');
          });
      }

      attemptToPlayAllR2SVideos();

      // The `loop` attribute on the HTML video tags will handle continuous looping.
      // - 10s videos loop every 10s.
      // - 30s videos loop every 30s.
      // Every 30 seconds (the LCM of 10 and 30), all videos will simultaneously be at their start (currentTime = 0).
      // This means after 90 seconds (which is 3 loops of the 30s videos), 
      // they will all be starting a new loop together, effectively "synced".
    });
  </script>

</body>
</html>
